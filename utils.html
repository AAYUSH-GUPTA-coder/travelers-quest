<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <div id="demo"></div>
  </head>
  <body></body>
  <script>
    var x = document.getElementById("demo");
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      //${position.coords.longitude} ${position.coords.latitude}
      console.log(position)
      fetch(
        `https://google-maps-geocoding.p.rapidapi.com/geocode/json?latlng=29.69197%2C76.98448&language=en`,
        {
          method: "GET",
          headers: {
            "x-rapidapi-host": "google-maps-geocoding.p.rapidapi.com",
            "x-rapidapi-key":
              "3c99947731msh43934abcbfd8b69p1237f3jsnf5ab3a83065b",
          },
        }
      )
        .then( async (response) => {
          const res = response;
          const {results} = await res.json()
          console.log(results)
          const add = results.find(add => {
            if (add.types[0] == "locality") {
              console.log(add.address_components[0].long_name)
              return add.address_components[0].long_name
            }
          })
          console.log(add.address_components[0].long_name)
        })
        .catch((err) => {
          console.error(err);
        });
    }
    getLocation();
    showPosition();
  </script>
</html>
